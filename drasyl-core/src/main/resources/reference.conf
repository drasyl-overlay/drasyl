akka {
  p2p {
    # Timeout after which the startup of the p2p subsystem is considered
    # to be failed. Increase this value if your p2p channels (see the
    # enabled-channels section) need longer time to be loaded.
    # time to be loaded.
    startup-timeout = 10 s

    # Timout after which the graceful shutdown of the p2p subsystem is
    # considered to be failed. After the timeout the p2p system is
    # forcefully shut down. Increase this value if your p2p channels (see
    # the enabled-channels section) need longer time to stop properly.
    shutdown-timeout = 10 s

    # List of the channels that will be loaded by the p2p.
    # A list of fully qualified config paths must be provided where
    # the given configuration path contains a channel-class key
    # pointing to an implementation class of the P2PTransportChannel interface.
    enabled-channels = ["org.drasyl.core.client.transport.relay.RetryRelayP2PTransportChannel"]

    # This channel connects to a relay server which sends messages to
    # the desired akka system and also sends messages from other systems
    # to us.
    # This enables communication with Akka systems to which no direct
    # connection can be established.
    relay {
      # The connection to the relay server is established to the
      # following url
      url = "wss://relayserver.incorum.org:443/"

      # This channel on the relay server is used. All clients must use
      # the same channel
      channel = default

      # Timeout after which the join to the relay server is considered
      # to be failed. Increase this value if your relay server need
      # longer time for confirmation.
      join-timeout = 30 s

      # retry-index * retry-delay
      retry-delay = 1 s

      # max retries bofore resilient session closes
      max-retries = 5

      # after forget retry counter is reset
      forget-delay = 10 m
    }

    direct {
      listen-port = 19001

      # list of seed peers with format {host}:{port}
      # default port: listen-port
      initial-peers = []
    }

    hostsystem {
      shared-dir = akka-p2p-sockets
    }
  }
}

drasyl {
  version = ${project.version}

  # User-Agent string of this drasyl client
  user-agent = "${project.groupId}:${project.artifactId}/${version}~${git.commit.id.abbrev}"

  # Writable storage location for the node identity. If there is no identity under this file path yet, an identity is created.
  # The file path must be absolute. If this field is left empty, the current execution path is used.
  identity.path = ""

  # Sets the WebSocket entry points to connect from outside to this node
  #entry-points = ["ws://domain.tld:22527/path", "ws://localhost:22527/path"]

  server {
    # IP address that server should listen on.
    bind-host = "0.0.0.0"
    # Port that server should listen on. A port number of `0` means that the port number is automatically allocated.
    bind-port = 22527

    # Sets the WebSocket entry point to connect from outside to this node server
    # entry_point = "ws://domain.tld:22527/path"
    # Sets the Channel Initalizer for netty
    channel-initializer = "org.drasyl.core.server.handler.NodeServerInitializer"
    # The maximum length of the aggregated content in bytes
    max-content-length = 1M
    # The maximum time a client has to sendMSG a
    # {@link city.sane.relay.common.messages.JoinMessage JoinMessage} before the
    # connection is closed again.
    max-handshake-timeout = 30 s
    ssl {
      enabled = false
      protocols = ["TLSv1.3", "TLSv1.2"]
    }
    # The size of the flush buffer, to minimize IO overhead.
    # A high value is good for throughput.
    # A low value is good for latency.
    flush-buffer-size = 256
    # For the total time, a connection can be in idle, you have to multiply
    # ${idle.max_idle_time}*${idle.retries}
    idle {
      # The maximum time that an active connection can spend in idle
      # before the relay checks with a PING request whether the remote station is still alive.
      # Note: every long value <= 0 s deactivates the idle function.
      timeout = 1 m
      # The maximum amount that a remote station cannot reply to a PING request
      # in succession in the interval ${max_idle_time}.
      # Min value is 1, max 32767
      retries = 3
    }
  }
}
